<header class="header">
    <a href="/admins/admin-panel.html" class="logo">
      <img src="/assets/img/logoMTO.svg" alt="SCANMASTER" />
      <span>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</span>
    </a>

    <nav class="nav">
      <a href="/admins/a-catalog.html">–†–µ–¥. –∫–∞—Ç–∞–ª–æ–≥</a>
      <a href="/admins/a-orders.html">–ó–∞—è–≤–∫–∏</a>
      <a href="/admins/a-accounts.html">–†–µ–¥. –∞–∫–∫–∞—É–Ω—Ç—ã</a>
      <a href="/admins/a-blog.html">–†–µ–¥. –±–ª–æ–≥</a>
      <a href="#" id="logout-link">–í—ã–π—Ç–∏</a>
    </nav>
    <button class="burger" id="burger-btn" aria-label="–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é">
      <span></span><span></span><span></span>
    </button>
    <div class="mobile-nav" id="mobileNav">
      <a href="/admins/a-catalog.html">–†–µ–¥. –∫–∞—Ç–∞–ª–æ–≥</a>
      <a href="/admins/a-orders.html">–ó–∞—è–≤–∫–∏</a>
      <a href="/admins/a-accounts.html">–†–µ–¥. –∞–∫–∫–∞—É–Ω—Ç—ã</a>
      <a href="/admins/a-blog.html">–†–µ–¥. –±–ª–æ–≥</a>
      <a href="#" id="logout-link-mobile">–í—ã–π—Ç–∏</a>
    </div>
</header>
  
<script type="module">
  import { getAuth, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
  import { app } from "/js/firebase-init.js";

  document.addEventListener("DOMContentLoaded", () => {
    const auth = getAuth(app);

    // üîí –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
    onAuthStateChanged(auth, (user) => {
      if (!user) {
        console.warn("‚õî –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω. –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—é...");
        window.location.href = "/main/admin-login.html";
      } else {
        console.log("‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –∫–∞–∫:", user.email || user.uid);
      }
    });

    const logoutLink = document.getElementById("logout-link");

    if (!logoutLink) {
      console.error("‚ùå –≠–ª–µ–º–µ–Ω—Ç #logout-link –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ DOM");
      return;
    }

    logoutLink.addEventListener("click", async (e) => {
      e.preventDefault();
      console.log("üö™ –ö–Ω–æ–ø–∫–∞ '–í—ã–π—Ç–∏' –Ω–∞–∂–∞—Ç–∞");

      try {
        console.log("üîê –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:", auth.currentUser);

        await signOut(auth);
        console.log("‚úÖ –£—Å–ø–µ—à–Ω—ã–π –≤—ã—Ö–æ–¥");

        alert("–í—ã –≤—ã—à–ª–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞.");
        window.location.href = "/main/main.html";
      } catch (error) {
        console.error("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ:", error);
        alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ. –û—Ç–∫—Ä–æ–π –∫–æ–Ω—Å–æ–ª—å, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –ø—Ä–∏—á–∏–Ω—É.");
      }
    });
  });
</script>
  
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const burger = document.getElementById('burger-btn');
    const mobileNav = document.getElementById('mobileNav');
    burger.addEventListener('click', () => {
      mobileNav.classList.toggle('open');
      if (mobileNav.classList.contains('open')) {
        mobileNav.style.display = 'flex';
      } else {
        mobileNav.style.display = 'none';
      }
    });
    // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –º–µ–Ω—é
    document.addEventListener('click', (e) => {
      if (!mobileNav.contains(e.target) && e.target !== burger) {
        mobileNav.classList.remove('open');
        mobileNav.style.display = 'none';
      }
    });
    // –í—ã—Ö–æ–¥ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞ —á–µ—Ä–µ–∑ –º–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é
    const logoutMobile = document.getElementById('logout-link-mobile');
    if (logoutMobile) {
      logoutMobile.addEventListener('click', async (e) => {
        e.preventDefault();
        if (window.logoutHandler) {
          await window.logoutHandler();
        } else {
          alert('–í—ã—Ö–æ–¥ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Ç–æ–ª—å–∫–æ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –º–µ–Ω—é.');
        }
      });
    }
  });
</script>
  
  
  
  
  